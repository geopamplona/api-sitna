TC.filter={},TC.filter.Filter=function(t){this.tagName_=t},TC.filter.Filter.prototype.getTagName=function(){return this.tagName_},TC.filter.Filter.prototype.writeFilterCondition_=function(){var t=this;return'<{prefix}:Filter xmlns:ogc="http://www.opengis.net/ogc">{inner}</{prefix}:Filter>'.format({prefix:"ogc",tag:t.getTagName(),inner:this.writeInnerCondition_(t)})},TC.filter.Filter.prototype.writeInnerCondition_=function(t){return t instanceof TC.filter.LogicalNary?t.write():t instanceof TC.filter.ComparisonBinary?t.write():t instanceof TC.filter.Comparison?t.write():(t instanceof TC.filter.Spatial,t.write())},TC.filter.Filter.prototype.writeInnerArrayCondition_=function(t){return t.reduce(function(t,e,r){return(t instanceof TC.filter.Filter?t.writeInnerCondition_(t):t)+e.writeInnerCondition_(e)})},TC.filter.Filter.prototype.getText=function(){return this.writeFilterCondition_()},TC.filter.and=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(TC.filter.And,e))},TC.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(TC.filter.Or,e))},TC.filter.not=function(t){return new TC.filter.Not(t)},TC.filter.bbox=function(t,e,r){return new TC.filter.Bbox(t,e,r)},TC.filter.intersects=function(t,e,r){return new TC.filter.Intersects(t,e,r)},TC.filter.within=function(t,e,r){return new TC.filter.Within(t,e,r)},TC.filter.equalTo=function(t,e,r){return new TC.filter.EqualTo(t,e,r)},TC.filter.notEqualTo=function(t,e,r){return new TC.filter.NotEqualTo(t,e,r)},TC.filter.lessThan=function(t,e){return new TC.filter.LessThan(t,e)},TC.filter.lessThanOrEqualTo=function(t,e){return new TC.filter.LessThanOrEqualTo(t,e)},TC.filter.greaterThan=function(t,e){return new TC.filter.GreaterThan(t,e)},TC.filter.greaterThanOrEqualTo=function(t,e){return new TC.filter.GreaterThanOrEqualTo(t,e)},TC.filter.isNull=function(t){return new TC.filter.IsNull(t)},TC.filter.between=function(t,e,r){return new TC.filter.IsBetween(t,e,r)},TC.filter["function"]=function(t,e){return new TC.filter.Function(t,e)},TC.filter.like=function(t,e,r,i,n,a){return new TC.filter.IsLike(t,e,r,i,n,a)},TC.filter.LogicalNary=function(t,e){TC.filter.Filter.call(this,t),this.conditions=Array.prototype.slice.call(arguments,1)},TC.inherit(TC.filter.LogicalNary,TC.filter.Filter),TC.filter.And=function(t){var e=["And"].concat(Array.prototype.slice.call(arguments));TC.filter.LogicalNary.apply(this,e)},TC.inherit(TC.filter.And,TC.filter.LogicalNary),TC.filter.Or=function(t){var e=["Or"].concat(Array.prototype.slice.call(arguments));TC.filter.LogicalNary.apply(this,e)},TC.inherit(TC.filter.Or,TC.filter.LogicalNary),TC.filter.LogicalNary.prototype.write=function(){return"<{prefix}:{tag}>{inner}</{prefix}:{tag}>".format({prefix:"ogc",tag:this.getTagName(),inner:this.writeInnerArrayCondition_(this.conditions)})},TC.filter.Not=function(t){TC.filter.Filter.call(this,"Not"),this.condition=t},TC.inherit(TC.filter.Not,TC.filter.Filter),TC.filter.Bbox=function(t,e,r){TC.filter.Filter.call(this,"BBOX"),this.geometryName=t,this.extent=e,this.srsName=r},TC.inherit(TC.filter.Bbox,TC.filter.Filter),TC.filter.Comparison=function(t,e){TC.filter.Filter.call(this,t),this.propertyName=e},TC.inherit(TC.filter.Comparison,TC.filter.Filter),TC.filter.Comparison.prototype.write=function(){var t="";return this.lowerBoundary&&this.upperBoundary&&(t="<ogc:LowerBoundary><ogc:Literal>{LowerBoundary}</ogc:Literal></ogc:LowerBoundary><ogc:UpperBoundary><ogc:Literal>{UpperBoundary}</ogc:Literal></ogc:UpperBoundary>".format({LowerBoundary:this.lowerBoundary,UpperBoundary:this.upperBoundary})),this.pattern&&(t="<ogc:Literal>{Pattern}</ogc:Literal>".format({Pattern:this.pattern})),this.params&&(t=$.isArray(this.params)?this.params.reduce(function(t,e,r){var i=function(t){return"<ogc:Literal>{value}</ogc:Literal>".format({value:t})};return(r>0?t:i(t))+i(e)}):"<ogc:Literal>{value}</ogc:Literal>".format({value:this.params})),"<{prefix}:{tag}{matchCase}{escape}{singleChar}{wildCard}><{prefix}:PropertyName>{name}</{prefix}:PropertyName>{values}</{prefix}:{tag}>".format({prefix:"ogc",tag:this.getTagName(),matchCase:"undefined"!=typeof this.matchCase?' matchCase="'+this.matchCase+'"':"",escape:"undefined"!=typeof this.escapeChar?' escape="'+this.escapeChar+'"':"",singleChar:"undefined"!=typeof this.singleChar?' singleChar="'+this.singleChar+'"':"",wildCard:"undefined"!=typeof this.wildCard?' wildCard="'+this.wildCard+'"':"",name:this.propertyName,values:t})},TC.filter.ComparisonBinary=function(t,e,r,i){TC.filter.Comparison.call(this,t,e),this.expression=r,this.matchCase=i},TC.inherit(TC.filter.ComparisonBinary,TC.filter.Comparison),TC.filter.ComparisonBinary.prototype.write=function(){return"<{prefix}:{tag}{matchCase}><{prefix}:PropertyName>{name}</{prefix}:PropertyName><{prefix}:Literal>{value}</{prefix}:Literal></{prefix}:{tag}>".format({prefix:"ogc",tag:this.getTagName(),matchCase:"undefined"!=typeof this.matchCase?' matchCase="'+this.matchCase+'"':"",name:this.propertyName,value:this.expression})},TC.filter.EqualTo=function(t,e,r){TC.filter.ComparisonBinary.call(this,"PropertyIsEqualTo",t,e,r)},TC.inherit(TC.filter.EqualTo,TC.filter.ComparisonBinary),TC.filter.GreaterThan=function(t,e){TC.filter.ComparisonBinary.call(this,"PropertyIsGreaterThan",t,e)},TC.inherit(TC.filter.GreaterThan,TC.filter.ComparisonBinary),TC.filter.GreaterThanOrEqualTo=function(t,e){TC.filter.ComparisonBinary.call(this,"PropertyIsGreaterThanOrEqualTo",t,e)},TC.inherit(TC.filter.GreaterThanOrEqualTo,TC.filter.ComparisonBinary),TC.filter.LessThan=function(t,e){TC.filter.ComparisonBinary.call(this,"PropertyIsLessThan",t,e)},TC.inherit(TC.filter.LessThan,TC.filter.ComparisonBinary),TC.filter.LessThanOrEqualTo=function(t,e){TC.filter.ComparisonBinary.call(this,"PropertyIsLessThanOrEqualTo",t,e)},TC.inherit(TC.filter.LessThanOrEqualTo,TC.filter.ComparisonBinary),TC.filter.NotEqualTo=function(t,e,r){TC.filter.ComparisonBinary.call(this,"PropertyIsNotEqualTo",t,e,r)},TC.inherit(TC.filter.NotEqualTo,TC.filter.ComparisonBinary),TC.filter.IsLike=function(t,e,r,i,n,a){TC.filter.Comparison.call(this,"PropertyIsLike",t),this.pattern=e,this.wildCard=void 0!==r?r:"*",this.singleChar=void 0!==i?i:".",this.escapeChar=void 0!==n?n:"!",this.matchCase=a},TC.inherit(TC.filter.IsLike,TC.filter.Comparison),TC.filter.IsNull=function(t){TC.filter.Comparison.call(this,"PropertyIsNull",t)},TC.inherit(TC.filter.IsNull,TC.filter.Comparison),TC.filter.IsBetween=function(t,e,r){TC.filter.Comparison.call(this,"PropertyIsBetween",t),this.lowerBoundary=e,this.upperBoundary=r},TC.inherit(TC.filter.IsBetween,TC.filter.Comparison),TC.filter.Function=function(t,e){TC.filter.Comparison.call(this,"Function",t),this.params=e},TC.inherit(TC.filter.Function,TC.filter.Comparison),TC.filter.Spatial=function(t,e,r,i){TC.filter.Filter.call(this,t),this.geometryName=e||"the_geom",this.geometry=r,this.srsName=i},TC.inherit(TC.filter.Spatial,TC.filter.Filter),TC.filter.Spatial.prototype.write=function(){return"<{prefix}:{tag}><{prefix}:PropertyName>{name}</{prefix}:PropertyName>{geometry}</{prefix}:{tag}>".format({prefix:"ogc",tag:this.getTagName(),name:this.geometryName,srsName:"undefined"!=typeof this.srsName?' srsName="'+this.srsName+'"':"",geometry:this.geometry.wrap.toGML()})},TC.filter.Bbox=function(t,e,r){TC.filter.Filter.call(this,"BBOX"),this.geometryName=t,this.extent=e,this.srsName=r},TC.inherit(TC.filter.Bbox,TC.filter.Filter),TC.filter.Bbox.prototype.write=function(){var t="<gml:Envelope{srsName}><gml:lowerCorner>{lowerCorner}</gml:lowerCorner><gml:upperCorner>{upperCorner}</gml:upperCorner></gml:Envelope>".format({srsName:"undefined"!=typeof this.srsName?' srsName="'+this.srsName+'"':"",lowerCorner:this.extent[0]+" "+this.extent[1],upperCorner:this.extent[2]+" "+this.extent[3]});return"<{prefix}:{tag}><{prefix}:PropertyName>{name}</{prefix}:PropertyName>{BBOX}</{prefix}:{tag}>".format({prefix:"ogc",tag:this.getTagName(),name:this.geometryName,BBOX:t})},TC.filter.Intersects=function(t,e,r){TC.filter.Spatial.call(this,"Intersects",t,e,r)},TC.inherit(TC.filter.Intersects,TC.filter.Spatial),TC.filter.Within=function(t,e,r){TC.filter.Spatial.call(this,"Within",t,e,r)},TC.inherit(TC.filter.Within,TC.filter.Spatial);